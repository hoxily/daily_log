工作记录2016-09-21

昨天修改Firefox的User-Agent为手机版，上百度贴吧，贴子里有多张大图，于是出现了百度贴吧app的推广链接。然而点击后，下载界面给出的却是*qihoo*.apk，去你妈的。重试了一遍，就变回百度贴吧app了。
现在http已经不靠谱到这种地步了吗？是哪些混蛋下的黑手？

仔细阅读了一下MegaPageControl所实现的拟真翻动书页功能。终于搞定输入页码向前跳页超过1页时显示内容不正确的bug。关键在于其原先的代码是依据只考虑前后单页翻页所写。后续加入跳页功能，没有把内部的状态设置正确，导致MegaPageFlip的turn翻页状态不正确，从而导致向前跳页超过1页时显示内容不正确。
简单地来说，其实现的拟真翻页书本只有3页。假定我们把这虚拟的书本放在桌子上，那么这三页纸则从下到上依照BackPage、MiddlePage、FrontPage叠加。视角则是府视向下看向桌面。
这里 MegaPageFlip 脚本提供了一个 turn property接口。这个turn的值的范围是 [0, 100] 的浮点值。当它是 0 时，正好处于还未翻动状态。当它是50时，正好处于沿着书脊翻到垂直于桌面的状态。当它是100时，则是沿着书脊完全翻到了左边。对该值做插值处理，即可出现拟真翻页的动画。
MegaPageControl为了简单起见，三页纸在翻页结束时的状态一共只有三种状态，分别是：
1。 没有翻动过的初始状态，此时看到的是第一页 FrontPage ，它盖住了下面的 MiddlePage 和 BackPage；
2。 FrontPage翻过去了，MiddlePage和BackPage还没翻动的状态；
3。 FrontPage和MiddlePage都翻过去，只剩BackPage的状态；
……（明天继续把它整理完）

