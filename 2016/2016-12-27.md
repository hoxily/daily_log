工作记录2016-12-27

再次排查，查询不到订单数据是因为魔镜端的时间与pos的时间不一致所致。
crm服务器存储的时候，直接采用了pos的时间。而魔镜端的时间有可能与pos时间不一致。
比如pos时间比魔镜端快1小时。那么就会造成魔镜端查询时，EndTime比pos的下单时间早1小时。那肯定查不到呀。
所以现在的问题变为，怎么确保魔镜端的时间与pos的时间保持一致。

----

黎明写了个方法，在魔镜初始运行的时候获取后台服务器的时间，计算出魔镜上的本地时间与后台服务器的时间之差，并存起来。之后凡是用到DateTime.Now的地方，全都使用本地的DateTime.Now加上该时间差所得服务器时间为标准。