2018-10-31

公司里的猫，摸过后，手臂发痒。不能摸。

LanguageManager与LocalizedText的使用有问题。在Mac上以iOS平台运行时，出现了死循环。无限添加LanguageManager实例了。

修复可能在Mac上出现的死循环bug。
bug原因是，LocalizedText访问LanguageManager.Instance时，触发AddComponent<LanguageManager>，但是这时又触发LanguageManager.Awake方法，静态的instance变量还没有记录下来。在Awake内部进一步触发OnLanguageChanged，去查找所有LocalizedText，调用UpdateText方法，在UpdateText方法内部又是访问LanguageManager.Instance，由于静态的instance变量还是null，重复上述过程。
解决方案1. Awake方法里就记录instance；
解决方案2. OnLanguageChanged延迟调用。比如下一帧。
死循环导致Unity Editor无响应时，可以尝试查看Editor.log日志以定位问题原因。

奇怪的是，在Windows上竟然没有出现这个死循环bug。

原因是windows上默认的系统语言是中文，而在mac上，系统语言被设置成了英文，造成LanguageManager刚初始化时就触发了OnLanguageChanged。
