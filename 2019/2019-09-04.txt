2019年09月04日, 星期三, GPS(30.3111, 120.0898)

发现jpg图下载不完整的话，Unity的WWW依然加载成功，而不报错。导致缺损的那块数据显示成灰色。
本来是想在UWR实现下载的时候记录一下Content-Length与Content-MD5，然后在WWW加载时做一个校验。但是有一种情况下会导致这个做法失效。也就是Coroutine直接被中止掉。这时磁盘上文件是损坏的文件。下次再加载时会因为磁盘上已有文件，而直接加载。跳过了校验流程。

方案1：把content-length与content-md5值随同数据文件一齐记录，就像unity的meta文件那样。然后在使用WWW加载时，使用该metadata进行校验。校验不通过，则删除这个meta文件以及对应的数据文件。

方案2：把文件下载流程改为先下载到temp临时文件，比如hash + ".tmp"后缀，通过content-length和content-md5校验之后再改名为正式文件名。保证正式文件总是已通过校验的有效数据。由于文件系统rename操作是具有原子性，要么成功，要么失败。如果整个流程被打断，文件系统要么保留着通过校验的数据的正式文件，要么维持在.tmp后缀的临时文件状态。
