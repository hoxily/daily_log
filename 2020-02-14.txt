2020年02月14日, 星期五, GPS(28.2297, 121.0983)

疑惑没有iPad要怎么测试需要多点触控的缩放功能。看起来还是搞个独立的iOS build吧。这样就能在我的手机上运行测试。参考以前的WANYUAN_TEST宏定义。

接昨天的思路。在放大的情形下，固定点固定不动是OK的。而反过来固定某个点进行缩小操作则会受到物体与视口相对大小的限制。假设不允许缩小为原始大小时，物体偏离中心。那就意味着要求缩小的过程中，固定点其实一直在逐渐变化。但是这样会造成不一致性。

参考iOS的照片缩放，在某次缩放操作结束之前，都是保持固定点不动的原则。当缩小后物体偏离了视口的中心，松手后会自动弹回中心。

基本上就是以上的规律。需要进行换算。

先用鼠标事件来模拟吧。

虽然直观上虚拟一个橡皮泥材质的物体进行缩放很美好。但是实际需要计算的时候还是得看两个投影矩阵的视椎体。

在缩放过程中，原始相机的视椎体没有发生变化，那么就可以以其为参考系。
每一小步放大操作，其固定点都可以以原始相机的视椎体为参考计算出坐标点。而放大镜相机的视椎体则根据放大结果倍数和固定点的比例位置得到。

每一小步缩小操作同理。只是松手时有可能需要做一个弹回动画。
