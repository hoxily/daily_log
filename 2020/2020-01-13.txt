2020年01月13日, 星期一, GPS(30.3108, 120.0904)

老爸老妈是早上11点左右出发。

早上来的时候发现电脑已是开机状态。明明昨晚离开的时候让它进入了休眠的。查看windows日志发现，在03:05左右，开机了。是有人不小心按到了电源按钮？还是仅仅按一下鼠标、键盘也能从休眠唤醒？

试了一下，还真是按一下键盘就唤醒了。那么这跟睡眠就没有区别了。本来从睡眠换成休眠就是为了只能从电源键唤醒的功能，结果两者差不多。那还不如睡眠速度快。

----

顶点动画有两大问题需要解决：
1. 人模的骨骼动画与布料的顶点动画需要同步。由于前者是由Animator驱动，后者是自己写的脚本驱动，很可能会对不上帧。
2. 在建模软件里看来的1个顶点，会因为其UV、Color、Normal等属性无法被三角面共享而分裂为多个顶点，从而在导入Unity3D后读取到的Mesh.vertex数量与顶点缓存文件中顶点数量不配匹。

其中的同步问题可以采用顶点动画跟随Animator的方式。主要是考虑到无法主动驱动Animator，那便让顶点动画跟上Animator即可。只要能获取到Animator当前的动画进度即可进行换算。

第二个顶点分裂的问题，只能期望多个同拓扑结构的mesh导出obj再导入unity3d后，其顶点的顺序并没有变。不然根本没有办法找回两帧之间的关联了。

----

发现unity的ModelImporter一个很有意思的导入设置项。给Normals选择Import时，表示使用原始数据中的法线，后面的如何Calculate法线就不起作用了。如果选择Calculate，则表示重新计算法线。这时，把Smooth Angle设置为0，可以做到任意一个三角面都是独立的法线，就像是立方体那样的棱角分明。称之为Flat模式。如果调大Smooth Angle，那么共边、共点的三角面之间夹角小于这个设定值时就会被认定为共享法线，那么就会有光滑的光照效果。称之为Smooth模式。

也就是说，对于布料模拟出来的各个独立的obj文件，一旦导入到Unity，并选择Calculate法线模式，就有可能会因为共享法线而共享顶点，造而各个obj文件的mesh顶点数发生变化。

----

布料模拟其实会改变面与面之间的夹角，那么原始法线就可能不再适用。特别是那种共享法线的Mesh。

----

郭亮说Style3D导出的obj其实也是顶点拆分过的。因为Style3D也是需要把数据提供给图形API，而图形API不支持一个顶点拥有多个法线这种模式。
