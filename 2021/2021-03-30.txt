2021年03月30日，星期二，杭州

找到昨晚上传99MiB的JSON数据，导致服务器报500错误的原因了。在廓型库里，添加印花，然后点击保存，这时不仅会保存UserProduct数据，还会保存SCR（style3d cloud render，云渲染）协议定义的必要数据，见POST的JSON的scr_json字段。而对于印花来说，为了云渲染需要将印花的geometry数据完整定义出来，而不能像平台那样，基于cloth基础数据，再加上定位点、Shader等等渲染出一个印花来。原因是云渲染使用的VRAY渲染器，要求的输入数据决定了必需提供完整geometry网格。所以Lt3D.getSrcJson函数，就会将geometry数据转换成co数据，直接以base64编码格式嵌入到这个超大的JSON串里面。另一个造成数据量大的因素则是，原始模型的版片本来就很多，印花又设置了XY循环，并且开启了应用到面料，相当于Cloth上每一块版片都对应一个印花，而每一个印花都包含有一个超大的base64字符串。从而造成点击保存时，生成的JSON超大，上传到服务器时出错了。
