2021年05月24日，星期一，杭州

用Style3D软件打开之前测试的sproj工程，在左侧场景管理视窗里，没有找到HDR环境的东西。
至于光照贴图则是点击“文件->烘焙光照贴图”，会在“场景/光照贴图”里生成光照贴图与背面光照贴图，不会生成侧面光照贴图。光照贴图强度默认为0.5，最小0.0，最大为1.0。

在“场景/离线渲染场景/离线渲染灯光/矩形灯1”上显示或者隐藏该矩形灯1，可以观察到服装上的明暗变化。但是实际是矩形灯遮挡了方向光造成的阴影效果。只要把该矩形灯移开远一点，就没有影响了。

虽然没法修改环境光里的hdr，换成另一个hdr。但是将工程导出为sco里，可以观察到textures文件夹下有两个hdr文件。一个是offline.hdr，一个是Studio_Vivid.hdr。使用GIMP软件打开这两个文件，前者正好是平台上在使用的.bin envmap，其中有一处亮白区域的RGB值达到了245。而Studio_Vivid.hdr则是另一张图，里面的最大RGB值达到了30.0。

我记得上次在Style3D Cloud问题反馈群里有人发截图说平台与软件的光照效对比不一致。那个会不会是一个例子？见钉钉合并转发的许允辽发言，软件绒类材质效果上传到平台后绒类的强烈侧面光效果丢失。

----

今天按着磊哥的code review上的要求去优化性能，发现原先猜测的先设置canvas大小，再重新获取webgl上下文是不行的。得到的新上下文的drawingBuffer大小依然是不满足要求的。也就说必须重新创建一个canvas元素才行。
